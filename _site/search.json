[
  {
    "objectID": "In-Class_Ex/In-Class_Ex08/In-Class_Ex08.html",
    "href": "In-Class_Ex/In-Class_Ex08/In-Class_Ex08.html",
    "title": "In-Class Excerise 8",
    "section": "",
    "text": "Basic concepts\n\nVertices are the points or nodes in a graph. In a complete graph, the number of vertices is denoted by n, and each vertex is labeled from 1 to n.\nEdges, on the other hand, are the lines connecting the vertices in a graph. In a complete graph with n vertices, each vertex is connected to n-1 other vertices, since it is not connected to itself.\nEach edge in a complete graph can be undirected, meaning that it goes both ways between the vertices it connects.\n\nBipartite Graph\n\nThe set (U and V) does not need to be person.\nGather if there are similarities among the entities in the set.\n\nMultimodel Graph\n\nIt is a graph where there are distinct groups of vertices that are more densely connected to each other than to vertices in other groups.\nMultimodal graphs can have different types of edges, including directed or undirected edges, weighted or unweighted edges, and signed or unsigned edges. The type of edge can affect the analysis and interpretation of the graph\nE.g. supply chain. Does not only apply to social media\n\nGraph Visualiation\n\nTo plot this on R, ggplot and ggtreemap are required.\n\nR Data Model\n\nnetwork: store relational data while igraph: have its own graph object\ntidygraph: latest graph data model. organise table into tbl_graph data format"
  },
  {
    "objectID": "In-Class_Ex/In-Class_Ex08/In-Class_Ex08.html#hands-on-exercise-8",
    "href": "In-Class_Ex/In-Class_Ex08/In-Class_Ex08.html#hands-on-exercise-8",
    "title": "In-Class Excerise 8",
    "section": "Hands-On Exercise 8",
    "text": "Hands-On Exercise 8\n\nInstalling and launching R packages\n\npacman::p_load(igraph, tidygraph, ggraph, \n               visNetwork, lubridate, clock,\n               tidyverse, graphlayouts)\n\n\n\nImport dataset for GAStech_nodes and GAStech_edges\n\nGAStech_nodes <- read_csv(\"data/GAStech_email_node.csv\")\nGAStech_edges <- read_csv(\"data/GAStech_email_edge-v2.csv\")\n\nData review:\n\nGAStech_edge: SentDate is currently in character instead of timedate data type.\n\n\n\nData Preparation\nConverting SentDate into dmy field:\n\nSecond mutate code needs to run correctly for the third code to run correctly.\n\n\nGAStech_edges <- GAStech_edges %>%\n  mutate(SendDate = dmy(SentDate)) %>%\n  mutate(Weekday = wday(SentDate,\n                        label = TRUE,\n                        abbr = FALSE))\n\nWrangling attributes\n\nSummarize using same target, source and weekday using Groupby\nFilter away weight >1\n\n\nGAStech_edges_aggregated <- GAStech_edges %>%\n  filter(MainSubject == \"Work related\") %>%\n  group_by(source, target, Weekday) %>%\n    summarise(Weight = n()) %>%\n  filter(source!=target) %>%\n  filter(Weight > 1) %>%\n  ungroup()\n\n\n\nPlotting the graph\n\nNeed to state directed or non-directed\n\n\nGAStech_graph <- tbl_graph(nodes = GAStech_nodes,\n                           edges = GAStech_edges_aggregated, \n                           directed = TRUE)\n\nChanging the active object\n\nDefault is node - Tinybird got two tables so important to choose the right one\n\n\nGAStech_graph %>%\n  activate(edges) %>%\n  arrange(desc(Weight))\n\n# A tbl_graph: 54 nodes and 1372 edges\n#\n# A directed multigraph with 1 component\n#\n# Edge Data: 1,372 × 4 (active)\n   from    to Weekday  Weight\n  <int> <int> <ord>     <int>\n1    40    41 Saturday     13\n2    41    43 Monday       11\n3    35    31 Tuesday      10\n4    40    41 Monday       10\n5    40    43 Monday       10\n6    36    32 Sunday        9\n# … with 1,366 more rows\n#\n# Node Data: 54 × 4\n     id label           Department     Title           \n  <dbl> <chr>           <chr>          <chr>           \n1     1 Mat.Bramar      Administration Assistant to CEO\n2     2 Anda.Ribera     Administration Assistant to CFO\n3     3 Rachel.Pantanal Administration Assistant to CIO\n# … with 51 more rows\n\n\nPlotting Network Data with ggraph\n\nmany available igraph layouts that can be utilised\nwhen working with ggraph, no need to specify the layout type.\n\n\ng <- ggraph(GAStech_graph) + \n  geom_edge_link(aes()) +\n  geom_node_point(aes())\n\ng + theme_graph()\n\n\n\n\nChanging color of the plot using theme_graph\n\ng <- ggraph(GAStech_graph) + \n  geom_edge_link(aes(colour = 'grey50')) +\n  geom_node_point(aes(colour = 'grey40'))\n\ng + theme_graph(background = 'grey10',\n                text_colour = 'white')\n\n\n\n\n\n\nFruchterman and Reingold layout\nAesthetic (aes_ is the visual attribute that can be changed\n\ng <- ggraph(GAStech_graph, \n            layout = \"fr\") +\n  geom_edge_link(aes()) +\n  geom_node_point(aes())\n\ng + theme_graph()\n\n\n\n\n\nnode_point looks for attribute in the node table (weight)\ncolor = Department allows more color to be used instead of having a greyscale\n\n\ng <- ggraph(GAStech_graph, \n            layout = \"nicely\") + \n  geom_edge_link(aes()) +\n  geom_node_point(aes(colour = Department, \n                      size = 3))\n\ng + theme_graph()\n\n\n\n\n\n\nCreating facet graphs\n\nUsing facet_edge and facet_node will create different charts depending your goals\n\nFor facet_edges\n\nset_graph_style()\n\ng <- ggraph(GAStech_graph, \n            layout = \"nicely\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = Department), \n                  size = 2)\n\ng + facet_edges(~Weekday)\n\n\n\n\n\n\nIncorporating statistical measure\n\ncentrality measure comes from igraph model\nThere is no changes to the node in GAStech_graph - due to pipe hence no new field added to GAStech_graph\n\n\ng <- GAStech_graph %>%\n  mutate(betweenness_centrality = centrality_betweenness()) %>%\n  ggraph(layout = \"fr\") + \n  geom_edge_link(aes(width=Weight), \n                 alpha=0.2) +\n  scale_edge_width(range = c(0.1, 5)) +\n  geom_node_point(aes(colour = Department,\n            size=betweenness_centrality))\ng + theme_graph()\n\n\n\n\n\n\nvisNetwork\n\nnaming had to be fixed for features\n\nData Preparation\n\nrestructure of table required - leftjoin and reorganisation of GAStech_edge table\nGAStech_edges_aggregated table only has from, to and weight\n\n\nGAStech_edges_aggregated <- GAStech_edges %>%\n  left_join(GAStech_nodes, by = c(\"sourceLabel\" = \"label\")) %>%\n  rename(from = id) %>%\n  left_join(GAStech_nodes, by = c(\"targetLabel\" = \"label\")) %>%\n  rename(to = id) %>%\n  filter(MainSubject == \"Work related\") %>%\n  group_by(from, to) %>%\n    summarise(weight = n()) %>%\n  filter(from!=to) %>%\n  filter(weight > 1) %>%\n  ungroup()\n\nPlot interactive network graph with layout\n\nvisNetwork(GAStech_nodes,\n           GAStech_edges_aggregated) %>%\n  visIgraphLayout(layout = \"layout_with_fr\") \n\n\n\n\n\nWorking with visual attributes - Nodes\n\nunique color to each category in the group field\nsetting random seed for reproducible results\n\n\nGAStech_nodes <- GAStech_nodes %>%\n  rename(group = Department)\n\n\nable to identify the categories without specfying\n\n\nvisNetwork(GAStech_nodes,\n           GAStech_edges_aggregated) %>%\n  visIgraphLayout(layout = \"layout_with_fr\") %>%\n  visLegend() %>%\n  visLayout(randomSeed = 123)\n\n\n\n\n\nWorking with visual attributes - Edge\n\nchanges from straight line to curve lines\n\n\nvisNetwork(GAStech_nodes,\n           GAStech_edges_aggregated) %>%\n  visIgraphLayout(layout = \"layout_with_fr\") %>%\n  visEdges(arrows = \"to\", \n           smooth = list(enabled = TRUE, \n                         type = \"curvedCW\")) %>%\n  visLegend() %>%\n  visLayout(randomSeed = 123)\n\n\n\n\n\nInteractivity\n\nvisOptions() is used to incorporate interactivity features in the data visualisation.\nThe argument highlightNearest highlights nearest when clicking a node.\nThe argument nodesIdSelection adds an id node selection creating an HTML select element.\nselect by id gives the list of names inside the field\n\n\nvisNetwork(GAStech_nodes,\n           GAStech_edges_aggregated) %>%\n  visIgraphLayout(layout = \"layout_with_fr\") %>%\n  visOptions(highlightNearest = TRUE,\n             nodesIdSelection = TRUE) %>%\n  visLegend() %>%\n  visLayout(randomSeed = 123)"
  },
  {
    "objectID": "project/sketch.html",
    "href": "project/sketch.html",
    "title": "Project Sketch",
    "section": "",
    "text": "Load R libraries\n\npacman::p_load(readxl, scales, viridis, lubridate, gridExtra, knitr, data.table, ggthemes, CGPfunctions, ggHoriPlot, gapminder, gganimate, ggbraid, ggstatsplot, ggiraph, plotly, performance, nortest, patchwork, tidyverse)\n\n\n\nLoad Dataset\n\nT2.3 <- read_csv(\"data/T2-3.csv\", show_col_types = FALSE)\nT3.4 <- read_csv(\"data/T3-4.csv\", show_col_types = FALSE)\nT3.5 <- read_csv(\"data/T3-5.csv\", show_col_types = FALSE)\n\n\n\nPeak System Demand\nHeatmap\n\n## Set up parameter\nheatmap <- T2.3 %>%\n  mutate(year = factor(year),\n         mth = factor(mth, levels = 1:12))\n\n## Plot heatmap for peak system demand\np_heatmap1 <- \n  ggplot(heatmap,\n         aes(mth,year, fill = peak_system_demand_mw)) + \n  geom_tile(color = \"white\", size =0.5) +\n  theme_tufte() +\n  coord_equal() +\n  scale_fill_gradient(name = \"Thousand Dollars\",\n                      low = \"lightblue\",\n                      high = \"darkblue\") +\n  labs(x = NULL, y = NULL, \n       title = \"Peak System Deamnd by Year and Month\") +\n  theme(axis.ticks = element_blank(),\n      plot.title = element_text(hjust = 0.5),\n      legend.title = element_text(size = 8),\n      legend.text = element_text(size = 6))\n\n## Plot linegraph\n\nHorizon Plot\n\n## Create date variable\nhorizonplot <- T2.3 %>%\n  mutate(monthyear = parse_date_time(paste0(year, \"-\", mth,\"-1\"),\"ymd\"))\n\n## Plot horizonplot\nhorizonplot %>% \n  ggplot() +\n  geom_horizon(aes(x = mth, y=peak_system_demand_mw), \n               origin = \"midpoint\", \n               horizonscale = 6)+\n    facet_grid(`year`~.) +\n    theme_few() +\n  scale_fill_hcl(palette = 'RdBu') +\n  theme(panel.spacing.y=unit(0, \"lines\"), strip.text.y = element_text(\n    size = 5, angle = 0, hjust = 0),\n    legend.position = 'none',\n    axis.text.y = element_blank(),\n    axis.text.x = element_text(size=7),\n    axis.title.y = element_blank(),\n    axis.title.x = element_blank(),\n    axis.ticks.y = element_blank(),\n    panel.border = element_blank()\n    ) +\n  xlim(1,12) +\n#    scale_x_date(expand=c(0,0), date_breaks = \"1 month\", date_labels = \"%b\") +\n  ggtitle('Peak System Demand per Year')"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html",
    "href": "Take-home_Ex/Take-home_Ex01/Take-home_Ex01.html",
    "title": "Take-home Exercise 1",
    "section": "",
    "text": "1. Overview\n\nAge-sex pyramid, also known as population pyramid, is an analytical visualization commonly used to reveal the distribution of a population by age group and gender. This take-home exercise aims to reveal the demographic structure in nine selected planning area of Singapore by using the population pyramid charts.\nThe dataset containing the demographics of Singapore residents for June 2022 was obtained from Department of Statistics. The data was then imported into Tableau desktop for data processing and visualisation.\n\n\n2. Design Sketch\n\n\n\n\n3. Data Wrangling\n\n3.1 Re-group AG into AG (10years)\nFrom the age group distribution in Singapore population, it can be observed that there is a big number of 19 bins where each bin covers an age range of 5 years. The bins may become narrow or compressed when fitted into a small-multiple plot which makes identifying of meaningful patterns challenging. Therefore, we re-group the age groups to cover a range of 10years to reduce the number of bins displayed.\n\n3.2 Creating male and female population variables\nA single population pyramid is made by two age group distributions for both genders in a population. The dataset used currently combines the population for both genders. Hence, two new variables (‘Male Pop’ & ‘Female Pop’) are created using ‘Calcuated Field’ to represent either male or female populations only.\n\n\n\n4. Population Pyramid\n\n4.1 Selection of 9 planning areas\nIn this exercise, we will be studying the demographics structure in 9 planning areas with the largest populations. Large populations are chosen to ensure that we can cover as many Singaporean residents as possible for the study. We can identify these areas using the population distribution by planning areas below.\n\n4.2 Final visualization\nThe 9 population pyramids are displayed in a single view using trellis display as shown below. This chart is also published on Tableau Public.\n\n\n\n5. Observations\n\nThe following are observations revealed by the above analytical visualization:\n\nAll nine planning areas have narrower base compared to the body which shows low birth rate as there are fewer number of children than adults.\nAll nine planning areas have almost symmetrical halves which suggests almost equal gender ratio.\nPunggol and Sengkang have considerable higher number of young children and teenagers (0 to 19 age groups) than other areas, likely due to the development of new flats in these areas.\nIndents at 30 to 49 age groups for Woodlands, Tampines and Choa Chu Kang signals an outflow of working adults out of these areas.\nBulge at 30 to 49 age groups for Punggol and Sengkang indicates an influx of working adults into these two planning areas.\nBedok and Tampines have the largest number of population of 50 to 69 age groups which suggests characteristics of mature estates.\nYishun has an overall barrel like structure compared to others suggesting a more balanced ratio of the young, middle-aged and the elderlies.\nFemales had a longer life expectancy than males in these areas as the female population are larger than male population for age group above 80 years old.\nAll nine planning areas have a distinct drop for 80 to 89 age group suggesting life expectancy to be in this range.\n\n\n\n6. Worksheet vs Dashboard\n\nWe can build a trellis display for nine population pyramids using multiple worksheets and compile into a dashboard (as shown above) or using a single worksheet (as shown below).\n\nWe will compare some advantages and disadvantages of each method.\nTrellis display (horizontal) in Worksheet\nAdvantages:\ni) Less steps required to build and has automated chart fitting and labeling.\nii) Easier to compare across the same age groups.\nDisadvantages:\ni) Requires several additional fields and complex equations to build a 3x3 grid.\nii) Pyramids are compressed to fit into the same display and could be misleading.\nTrellis display in Dashboard\nAdvantages:\ni) Larger space for each pyramids so they are not compressed.\nii) Able to custom layout to desired design without any coding.\nDisadvantages:\ni) Multiple worksheet adjustments are required for any changes to the pyramids.\nAfter considering the pros and cons, trellis display in dashboard is better suited for this exercise.\n\n\n7. Step-by-Step Instructions\n\n6.1 Data preparation\n\n\n\n\n\n\n\n\nNo.\nStep\nIllustration\n\n\n\n\n1.\nDownload csv file from Singstat website given in Section 1. Load the respopagesextod2022.csv file into Tableau Desktop by clicking ‘File’ followed by ‘Open’.\n\n\n\n2.\nClick on the drop-down arrow for ‘AG’, hover over ‘Create’ and click on ‘Group’. Create age groups in interval of 10 by grouping a pair of age groups with 5 years interval. Type ‘AG (10years)’ in ‘Field Name’ when new grouping is done.\n\n\n\n3.\nGo to ‘Analysis’ and click on ‘Create Calculated Field’. Overwrite ‘Calculation1’ with ‘Male Pop’ and typed in the following formula: IF [Sex] = “Males” THEN [Pop] END\nRepeat this step for ‘Female Pop’ with the following formula: IF [Sex] = “Females” THEN [Pop] END\n\n\n\n\n6.2 Creating population pyramids for 9 planning areas in dashboard\n\n\n\n\n\n\n\n\nNo.\nStep\nIllustration\n\n\n\n\n1.\nCreate a new worksheet ‘Pyramid (3Top)’. Click and drag ‘PA’, ‘Male Pop’ & ‘Female Pop’ from Data pane to Columns. Add ‘AG(10yrs)’ to Rows. Ensure summation of ‘Male Pop’ and ‘Female Pop’ are added.\n\n\n\n2.\nClick the dropdown arrow on PA beside ‘Columns’ and select ‘Filter’. Uncheck all except the 3 selected planning area. Click ‘Ok’ once done.\nHide field label for row ‘AG (10yrs) and column ’PA’.\n\n\n\n3.\nHover over AG(10yrs) on the chart. Click on the ‘AZ’ icon and sort the rows in descending order (0 to 9 at the bottom & 90 and over at the top)\nRight-click on one of the ‘Male Pop’ x-axis and select ‘Edit Axis’. Under Range, select ‘Fixed’ and set 0 as min and 30,000 as max. Under Scale, checked ‘Reversed’. Under Axis Titles, remove the title ‘Male Pop’. Close window once done.\nRight-click on one of the ‘Female Pop’ x-axis. Repeat the same steps as above for Range and Axis Titles only.\nUnder ‘Marks’, click on ‘Color’ under ‘Sum(Female Pop)’ ribbon. Select pink color to represent female population.\nSelect ‘Entire View’ under ‘Fit’. Your diagram should look similar to the diagram on the right.\n\n\n\n4.\nDuplicate ‘Pyramid (3Top)’ and renamed worksheets as ‘Pyramid (3Mid)’ and ‘Pyramid (3Btm)’. In new workshops, update ‘PA’ filter such that the remaining 6 planning areas are all included.\n\n\n\n5.\nClick on ‘New Dashboard’ at the bottom and rename it as ‘Dashboard (Trellis)’.\nUse floating objects and create a placeholders as shown in the diagram on the right.\n\n\n\n6.\nHold down shift and drag ‘Pyramid(3Top)’, ‘Pyramid (3Mid)’ and ‘Pyramid (3Btm)’ into the respective placeholders. Update the chart title and axis titles accordingly. The final diagram should look like the one on the right.\n\n\n\n\n6.3 Creating population pyramids for 9 planning areas in a single worksheet\n\n\n\n\n\n\n\n\nNo.\nStep\nIllustration\n\n\n\n\n1.\nCreate a new worksheet ‘Worksheet (Trellis)’. Click and drag ‘PA’, ‘Male Pop’ & ‘Female Pop’ from Data pane to Columns. Add ‘AG(10yrs)’ to Rows.\nClick the dropdown arrow on PA beside ‘Columns’ and select ‘Filter’. Uncheck all except the 9 selected planning area. Click ‘Ok’ once done.\n\n\n\n2.\nRepeat the same step as Section 6.2 Step 3, except use ‘Fit Width’. The diagram should look like the one on the right."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html",
    "href": "Take-home_Ex/Take-home_Ex02/Take-home_Ex02.html",
    "title": "Take-home Exercise 2",
    "section": "",
    "text": "1. Overview\n\nIn this take-home exercise, the task is to critique an original data visualisation of demographic structure for nine planning area in Singapore and create an alternate improved design by applying design principles and best practices.\nThe dataset used in this exercise is Singapore Residents by Planning Area / Subzone, Age Group, Sex and Type of Dwelling, june 2022. It is available at Department of Statistics, Singapore.\n\n\n2. Original Visualisation\n\nThe original visualisation contains three sections: (i) overall population pyramid (a.k.a age-sex pyramid), (ii) population pyramid by planning area (PA) and (iii) population pyramid by subzone. The live dashboard can be found in Tableau Public.\n\n\n\n\n\n\n\nOverall Population Pyramid\n\nPopulation Pyramid by Subzone\n\nPopulation Pyramid by Planning Area\n\n\n\n\n2.1 Clarity\na. Incomprehensible dashboard title: the term ‘Age Pyramid: Sex Pattern’ does not have the same meaning as age-sex pyramid. Readers might be confused with what the visualisations are trying to show.\nb. Chart titles have no lead-in or call-outs: It is good that reader is able to understand the reference country and time period from the chart title. However, it can be further improved with lead-in and call-outs to also explain the key trend or insights.\nc. Y-axis ticker labels are confusing: There is an unknown age group called ‘Null’ and the age range of each age group is represented using a solo number. Readers are not able to decipher what ‘Null’ age group, the age range of each group and whether the age group ‘80’ refers to 80 to 90 years old or 80years old and above.\nd. Source of data is missing: Missing recognition of data source could let the data visualisation lose credibility.\ne. Excess visulisation did not meet business intent: Excessive information is provided in this dashboard. Plotting of overall population pyramid, subzone population pyramids as well as all planning area population pyramids may lead readers away from the business intent of studying only nine planning areas.\nf. Instructions are provided on overview page: Readers are guided on how to use the interactive dashboard. This reduces confusion on how to use the interactive dashboard.\n2.2 Aesthetics\na. Congested and repeated x-axis labels: For planning areas and subzone pages, labels for the x-axis are clear but congested. Legend and color fill can be used to replace the congested labels and the need for repeated labels.\nb. X-axis between plots are not distinct: For planning areas and subzone pages, the x-axis looks like they run continuously and there are two ‘0K’ labels for the same plot. This makes it difficult to locate the axis.\nc. Visualisations do not fit into a single window: For planning areas and subzone pages, it is difficult to view and make comparison between population pyramids of different areas. The blanks in the charts does not value add to the visualisations.\nd. Missing horizontal grid lines: For planning areas and subzone pages, minor horizontal grid lines can be added for readers to read and compare the same age group across two areas.\nd. Chart title and x-axis title at the same level: On the overview page, readers may not be able to find the chart title for the bottom chart because it is on the same level as x-axis title.\ne. Dual y-axis: On the overview page, the y-axis in the middle for the bottom chart does not value-add. It would be able to remove it and reference the y-axis on the left.\n\n\n3. Alternative Visualisation\n3.1 Proposed design sketch\nSince the task is to study the demographic structures of nine planning areas, the proposed design do not need the overall population pyramid and the population pyramid by subzone since they provide excess information that might distract the readers from what is important. Hence, the proposed design will only contain one chart which is the population pyramids of nine planning areas.\n\n3.1 Clarity\na. Meaningful chart titles: The main title will be “Discovering Population Pyramid of 9 Most Populated Planning Areas in Singapore, June 2022” so the readers are able to understand the context of the visualisation immediately. The chart also have subtitle and commentary to provide additional clarity on the context and key observation.\nb. Right sized content: The visualisation do not contain excessive information that could distract the readers as explained at the start of this section. Also, only nine instead of all planning areas are plotted so readers know immediately which areas are the targets of comparison.\nc. Clear axes labels: Both axes titles are properly labelled so the readers know what each chart measures. For y-axis, the age groups are ordered from youngest at the bottom to oldest at the top per typical convention so readers can digest this information easily. For x-axis, there is no labels for male and female populations as they will be colour coded.\nd. Inclusion of data source at the bottom of the chart will provide credibility to the visualisation.\n3.2 Aesthetic\na. Use of legend and colour labels: The color shading and legend of the graph is used to identify the gender in each population pyramid. The intention of the colour is to help reader easily identify the gender directly from the chart without referring to the x-axis. It also helps to reduce congestion at the x-axis.\nb. Clear demarcation and gridlines: The charts do not share a continuous x-axis so readers can easily differentiate the axes for different planning area charts. Grid lines are also added so readers are able to make horizontal and vertical comparisons with ease.\nc. Smaller scale of x-axis major ticks: The scale of x-axis major tick marks are reduced to 5000 to show finer details and allow readers to identify smaller differences easily.\nd. Readable chart size: The size of the charts in the visualisation is configured such that all the bars within the population pyramids are readable and does not feel congested.\n\n\n4. Load Libraries and Dataset\nThe following code chunk is used to install the required R packages and load them onto R environment.\n\npacman::p_load(patchwork, ggthemes, hrbrthemes, ggrepel, plotly, tidyverse)\n\nNext, read_csv() from readr as part of tidyverse package is used to import the source file which is in csv file format.\n\n#To load dataset from .csv file\npopdata <- read_csv(\"Data/respopagesextod2022.csv\") \n\nRows: 100928 Columns: 7\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (5): PA, SZ, AG, Sex, TOD\ndbl (2): Pop, Time\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\n\n\n\n5. Data Preparation\n5.1 Compute frequency count by Age Group, Sex and Planning Area\nFrequency count of the total population is computed based on planning area, sex and age group. As shown in code chunk below, groupby() is used to group data by defined parameters while summarise() counts the number of residents.\n\n#Summing residents based on planning area, age group and sex\npopdata <- popdata %>%\n                group_by(`PA`,`AG`,`Sex`) %>%\n                summarise('Count'= sum(`Pop`)) %>%\n                ungroup()\n\n`summarise()` has grouped output by 'PA', 'AG'. You can override using the\n`.groups` argument.\n\n\n5.2 Transform population data for males\nTo plot the male population on the left axis of the population pyramid, ‘Pop’ values of Males are converted to negative values using the ifelse() function in code chunk below.\n\n#Create variable for chart purposes\npopdata_plot <- popdata\n\n#If Sex = 'Males', population value becomes negative else remains unchanged\npopdata_plot$Count = ifelse(popdata_plot$Sex == 'Males',\n                     yes = -popdata_plot$Count,\n                     no = popdata_plot$Count\n                     )\n\n\n\n6. Visualisation\n6.1 Finding the top 9 most populated planning area\nAs the requirement is to study the demographic structures of nine planning area, we will be choosing the nine most populated planning area.\nThe code chunk below consists of three main steps to obtain our target areas: First, the frequency count is computed based on planning area only using groupby() then the list is sorted from largest to smallest count using arrange(desc()). The final step is to pick out the top nine planning area in the list, which are also the nine most populated areas using top_n().\n\n#This code chunk does the following:\n#Step1) Compute resident count by PA and sort count in descending order\n#Step2) Removes all but top 9 most populated PA\npopdata_top9 <- popdata %>%\n                  group_by(`PA`) %>%\n                  summarise('total'= sum(`Count`)) %>%        #Step1\n                  arrange(desc(`total`)) %>%                 \n                  top_n(9,wt=total) %>%                       #Step2\n                  ungroup()\n\n6.2 Trellis display of population pyramids for top 9 most populated planning area of Singapore\nFor this dataset, the age group is sorted alphanumerically which would not make sense for the population pyramid axis. Hence, we need to assign the correct order for this categorical variable.\nThis can be done by changing the order for age group variable using factor() with the factor levels.\n\n#Define the correct order for AG\nag_order <- c(\"0_to_4\", \"5_to_9\", \"10_to_14\", \"15_to_19\", \n                 \"20_to_24\", \"25_to_29\", \"30_to_34\", \"35_to_39\", \n                 \"40_to_44\", \"45_to_49\", \"50_to_54\", \"55_to_59\", \n                 \"60_to_64\", \"65_to_69\", \"70_to_74\", \"75_to_79\", \n                 \"80_to_84\", \"85_to_89\", \"90_and_over\")\n\n#Update order for AG column for popdata_plot dataframe\npopdata_plot$AG <- factor (popdata_plot$AG, level = ag_order)\n\nAn initial static plot is plotted using ggplot() and geom_col() from ggplot2 package. Then using facet_wrap, the population pyramids of 9 most populated planning areas are put into a 3 by 3 grid.\nscale_x_continuous() is used to configure the x-axis markers and ticker labels while labs() is used to add title and subtitle on top of the chart. Last but not least, the axis titles are updated using ylab() and xlab().\n\n#Using ggplot and facet_wrap to plot a trellis diagram of 9 population pyramid\np <- ggplot(subset(popdata_plot, PA %in% c(popdata_top9$PA)),\n        aes(x = Count, y= AG, fill = Sex)) +\n    geom_col() +\n    facet_wrap( ~PA, nrow = 3, ncol = 3) +\n    scale_x_continuous(limits = c(-15000,15000),              #format x-axis\n                       breaks = seq(-15000, 15000, 5000),\n                       labels = paste0(as.character(c(seq(15, 0, -5),\n                                                      seq(5, 15, 5))),\"K\"))\n\n#Formatting axis and adding chart title and subtitle\np + labs(title=\"Discovering Population Pyramid of 9 Most Populated Planning Areas in Singapore, June 2022\", \n         subtitle=\"Distinct differences in demographic structures of north-east vs west planning areas of Singapore\",\n         caption=\"Source: Department of Statistics, Singapore (SingStat)\") +\n  theme(plot.title = element_text(color = \"black\", size = 20, face = \"bold\")) +\n  ylab(\"Age Groups\") +\n  xlab(\"Population\") +  \n  theme_bw()        \n\n\n\n\n\n\n7. Reflection\nMy main challenge when attempting this take-home exercise is not being proficient in using the correct R packages. With suitable packages and functions, more analytical layers can be applied to the chart object to better serve the user needs. For example, I would like to add relevant statistical parameters such as mean male and female population of the nine planning areas for each age group as a vertical line in each nine plots to provide some ease of comparison for the readers.\nFuture work can be done to enhance the population pyramid chart. An example is using plotly package, where a tooltip can help users identify the stats of each bar in the pyramid without labelling all the charts."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html",
    "title": "Take-home Exercise 3",
    "section": "",
    "text": "This exercise aims to unveil the salient patterns in the resale prices of public housing property based on different residential towns and estates through analytical visualization. Appropriate visualization and interactive techniques are applied to enhance users’ data discovery experiences.\nIn this study, the focus is on 3, 4 and 5 room housing types for the year of 2022.\nThe dataset used was retrieved from Data.gov.sg, titled Resale flat princes based on registration date from Jan-2017 onwards. The source file is in csv format."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#loading-r-packages",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#loading-r-packages",
    "title": "Take-home Exercise 3",
    "section": "2. Loading R Packages",
    "text": "2. Loading R Packages\n\nThe following packages and required libraries are loaded in this exercise:\n\npacman::p_load(ggstatsplot, ggiraph, plotly, performance, nortest, patchwork, tidyverse)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#dataset",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#dataset",
    "title": "Take-home Exercise 3",
    "section": "3. Dataset",
    "text": "3. Dataset\n\n3.1 Import dataset\n\n#Import dataset from .csv file\nHDBdata <- read_csv(\"Data/resale-flat-prices-based-on-registration-date-from-jan-2017-onwards.csv\", show_col_types = FALSE)\n\n#ReView data\nhead(HDBdata, n=5)\n\n# A tibble: 5 × 11\n  month   town     flat_…¹ block stree…² store…³ floor…⁴ flat_…⁵ lease…⁶ remai…⁷\n  <chr>   <chr>    <chr>   <chr> <chr>   <chr>     <dbl> <chr>     <dbl> <chr>  \n1 2017-01 ANG MO … 2 ROOM  406   ANG MO… 10 TO …      44 Improv…    1979 61 yea…\n2 2017-01 ANG MO … 3 ROOM  108   ANG MO… 01 TO …      67 New Ge…    1978 60 yea…\n3 2017-01 ANG MO … 3 ROOM  602   ANG MO… 01 TO …      67 New Ge…    1980 62 yea…\n4 2017-01 ANG MO … 3 ROOM  465   ANG MO… 04 TO …      68 New Ge…    1980 62 yea…\n5 2017-01 ANG MO … 3 ROOM  601   ANG MO… 01 TO …      67 New Ge…    1980 62 yea…\n# … with 1 more variable: resale_price <dbl>, and abbreviated variable names\n#   ¹​flat_type, ²​street_name, ³​storey_range, ⁴​floor_area_sqm, ⁵​flat_model,\n#   ⁶​lease_commence_date, ⁷​remaining_lease\n\n\n3.2 Data Preparation\nFrom the data review in the earlier step, we want to converting month to date format to do more meaningful analysis. This is done using as.Date() as shown in the code chunk below:\n\n#Appending an artifical day to convert month into date format\nHDBdata$month <- paste(HDBdata$month,\"01\", sep = \"-\") %>%\n  as.Date(HDBdata$month, format = \"%Y-%m-%d\")\n\nAs the dataset contains information that is outside the scope of our studies. We can extract the relevant housing type and time period by using filter() function.\n\n#Filtering the dataset based on time range and flat types\nHDBdata2022 <- HDBdata %>% filter(month>\"2021-12-01\" & month<\"2023-01-01\") %>%\n  filter(flat_type %in% c(\"3 ROOM\",\"4 ROOM\",\"5 ROOM\"))\n\n3.3 Data Wrangling\nIn Singapore, HDB owners only have the ownership rights to their flats for a limited period of time due to 99-year lease. Upon the expiry of their leases, the flats will be reverted to HDB and the land will be surrendered to the State. Hence, we would want to convert remaining lease to numeric data type for further analysis since it could potentially influence the resale price.\n\nHDBdata2022$remaining_lease_month = as.numeric(substr(HDBdata2022$remaining_lease,10,11))\nHDBdata2022$remaining_lease_month = ifelse(is.na(HDBdata2022$remaining_lease_month),\n                                           yes = 0,\n                                           no = HDBdata2022$remaining_lease_month)\n\nHDBdata2022$remaining_lease = as.numeric(substr(HDBdata2022$remaining_lease,1,2))+\n  (HDBdata2022$remaining_lease_month/12)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#visualisation",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#visualisation",
    "title": "Take-home Exercise 3",
    "section": "4. Visualisation",
    "text": "4. Visualisation\n\n4.1 General Exploratory Data Analysis (EDA)\nIn the first part of our exploratory data analysis, we will visualise data from the cleaned data set to understand the general trends in the property market of 2022. Starting from a broader perspective, we would be able to narrow down the specific areas to focus on in the next stage.\n4.1.1 Price trend of 3-, 4- and 5-room type in Year of 2022\nFirst, we will explore the general price trend over the course of the year. An interactive plot was created using plot_ly() to allow users to read the average resale price easily with the tooltip. The tooltip content was edited using the hovertemplate() function.\n\n# Find the average resale price grouped by month, flat type\nHDBdata2022_ave <- HDBdata2022 %>%\n  group_by(`month`, `flat_type`) %>%\n  summarise(ave_price = mean(resale_price)) %>%\n  mutate(new_date = format(month, \"%h %Y\"))\n\n# Create an interactive plot\nplot_ly(\n  data = HDBdata2022_ave, \n  x = ~month, y = ~ave_price,\n  color = ~flat_type,\n  type = 'scatter', mode = 'line',\n  hovertemplate = ~paste(\"Month:\", new_date,\n                         \"<br>Average Resale Price($k):\", round(ave_price/1000, digits=0))) |>\n#Configure title and axes\n  layout(title = \"Average Resale Price in 2022 for 3-, 4-, 5-Room Flat Type\",\n         xaxis = list(title = \"\"),\n         yaxis = list(title = \"Average Resale Price($)\", range = c(350000,700000)))\n\n\n\n\n\nObservations:\n\nAll three flat types average resale price by the end of 2022 had increased above the resale price at the start of the year.\nThe overall percentage increase in resale price for 2022 were 6.17%, 7.05% and 5.74% for 3, 4 and 5 room flat type respectively.\nThe price difference between 3- and 4- room flat type was in general larger than the price difference between 4- and 5- room flat types for the whole of 2022.\nTaking a deeper look on the trend, we can also notice that the resale price for all three flat types had declined slightly from Oct’22.\n\n4.1.2 Total transaction volume for all flat types in each town\nWith bubble plot, we can visualise up to 3 parameters and up to 4 parameters with the use of colours in a single chart. By making the chart interactive, we can also isolate the towns based on our scope of analysis.\n\n#Count number of transactions in each town\nHDBdata2022_trans <- HDBdata2022 %>%\n  group_by(`town`) %>%\n  summarise(volume = n(), \n         ave_price = mean(resale_price/1000), \n         ave_remain_lease = mean(remaining_lease)) %>%\n  arrange(desc(volume)) %>%\n  mutate(town = factor(town,town))\n\n#Plot a bubble chart\np <- HDBdata2022_trans %>%\n  \n#prepare text for tooltip\n  mutate(text = paste(town, \n                      \"<br>Ave Resale Price ($k): \", round(ave_price,\n                                                           digits=0), \n                     \"<br>Ave Remaining Lease (Yr): \", round(ave_remain_lease,\n                                                          digits=0),\n                      \"<br>Transaction Vol: \", volume)) %>%\n# Basic Plot\n  ggplot(aes(x = ave_remain_lease, y = ave_price, \n             size = volume, color = town, text = text)) +\n  geom_point(alpha = 0.6) + \n  scale_size(range = c(2, 20)) +\n  scale_x_continuous( limits = c(50, 100)) +\n  scale_y_continuous( limits = c(400, 800)) +\n  theme_minimal()\n\nggplotly(p, tooltip=\"text\") %>%\n  layout(title = 'Characteristics across Towns, 2022',\n         xaxis = list(title = 'Average Remaining Lease (Yr)'), \n         yaxis = list(title = 'Average Resale Price ($k)'),\n         legend = list(title=list(text='<b> Town </b>')))\n\n\n\n\n\nObservations:\n\nDifferent towns can have significantly different transaction volume and resale price, which suggests some towns are more preferred by buyers.\nIt can be observed that highest transacted towns tend to have the longer remaining lease while the lowest transacted towns have shorter remaining lease. This might suggest towns with newer flats, i.e. longer remaining lease, may have higher chance of selling their flats.\nIt is also noted that the most expensive flats do not come from towns with the largest transaction or have the longest remaining lease. Hence, it is worth exploring what are the factors that correlate with the resale price.\n\n4.1.3 Distribution of flat types in each town\n\np_bar <- ggplot(data=HDBdata2022, aes(x = after_stat(count), y = town, fill = flat_type)) +\n  geom_bar(position = \"fill\", stat = \"count\")\n\n\nggplotly(p_bar) %>%\n  layout(title = 'Distribution of Flat Types in each Town, 2022',\n         xaxis = list(title = 'Town'), \n         yaxis = list(title = 'Count'),\n         legend = list(title=list(text='<b> Flat Type </b>')))\n\n\n\n\n\nObservations\n\nThere is a significantly different proportion of 3-, 4- and 5-room in each town. Therefore, the use of average resale price of each town may not reveal the minute relationships. In the next section, we will explore and test the observations found between resale price and the respective factors.\n\n\n\n4.2 Resale Price and Relevant Factors EDA\nIn this section, we will assess the impacts of various individual factors on resale price.\n4.2.1 HDB flats located near the central region of Singapore can fetch higher resale prices\nTo explore the resale prices of the flats, box plots are used to visualise the pattern between continuous data type (resale prices) and categorical data type (towns).\n\nHDBdata2022_region <- HDBdata2022 %>%\n  mutate(region = case_when(town %in% c(\"ANG MO KIO\", \"HOUGANG\", \"PUNGGOL\", \"SERANGOON\", \"SENGKANG\") ~ \"North-East\",\n            town %in% c(\"BISHAN\", \"BUKIT MERAH\", \"BUKIT TIMAH\", \"CENTRAL AREA\",\n                         \"GEYLANG\", \"KALLANG/WHAMPOA\", \"MARINE PARADE\", \"QUEENSTOWN\", \"TOA PAYOH\") ~ \"Central\",\n            town %in% c(\"BEDOK\", \"PASIR RIS\", \"TAMPINES\") ~ \"East\",\n            town %in% c(\"SEMBAWANG\", \"WOODLANDS\", \"YISHUN\") ~ \"North\",\n            town %in% c(\"BUKIT BATOK\", \"BUKIT PANJANG\", \"CHOA CHU KANG\", \"CLEMENTI\", \"JURONG EAST\", \"JURONG WEST\") ~ \"West\"))\n\n\nplot_ly(data = HDBdata2022_region,\n        x = ~town, y = ~resale_price,\n        type = \"box\",\n        color = ~region) %>%\n  \n  layout(title = \"Resale Price vs Town, 2022\",\n         xaxis = list(title = \"Town\"),\n         yaxis = list(title = \"Resale Price($)\"))\n\n\n\n\n\nObservations:\n\nThe median resale prices of HDB flats located in central region are higher than the rest of the regions in Singapore.\n\nTo test this observation, the following null hypothesis were tested:\nH0: The median resale price for different towns are the same.\nH1: The median resale price for different towns are different.\nA random sample where one town is picked from each region is used for One-way ANOVA test. The chosen towns are Central Area, Bedok, Yishun, Serangoon and Clementi.\n\np_town <- HDBdata2022_region %>% \n  filter(town %in% c(\"CENTRAL AREA\", \"BEDOK\", \"YISHUN\", \"SERANGOON\", \"CLEMENTI\")) %>%\n  ggbetweenstats(\n    x = town, y = resale_price,\n    type = \"nonparametric\",\n    mean.ci = TRUE, \n    pairwise.comparisons = TRUE, \n    pairwise.display = \"ns\",\n    p.adjust.method = \"fdr\",\n    messages = FALSE,\n    xlab = \"Town\",\n    ylab = \"Resale Price ($)\",\n    title = \"One-way ANOVA (Random Sample)\"\n  )\n\np_town\n\n\n\n\nFrom the test results, we can observe that other than clementi (West) and serangoon (North-East), the median is proven statiscally to be different across towns in the other regions.\n4.2.2 HDB flats with larger floor area have higher average resale prices\nIntuitively, we expect larger flats will have higher resale price as the purchase price was already higher. However, we can use the data from HDB to test our basis using the transaction data in Year 2022 as shown below.\n\nplot_ly(\n  data = HDBdata2022, \n  x = ~floor_area_sqm, y = ~resale_price,\n  color = ~flat_type,\n  type = 'scatter', mode = \"markers\",\n  hovertemplate = ~paste(\"Floor Area (sqm):\", floor_area_sqm,\n                         \"<br>Resale Price($M):\", round(resale_price/1000000,\n                                                        digits=2))) |>\n#Configure title and axes\n  layout(title = \"Resale Price vs Floor Area, 2022\",\n         xaxis = list(title = \"Floor Area (sqm)\"),\n         yaxis = list(title = \"Resale Price($)\"))\n\n\n\n\n\nObservations:\n\nThe first observation is that the average resale prices increases as the floor area increases.\nThe second observation is the each flat type can be classified by distinct floor area range.\n\nTo test the first observation, the following null hypothesis were tested:\nH0: The average resale price for different floor areas are the same.\nH1: The average resale price for different floor areas are different.\n\n#check for normality using Anderson-Darling\nad.test(HDBdata2022$floor_area_sqm)\n\n\n    Anderson-Darling normality test\n\ndata:  HDBdata2022$floor_area_sqm\nA = 320.42, p-value < 2.2e-16\n\n\nThe Anderson-Darling test output suggest that there is sufficient evidence statistically to reject the null hypothesis that floor area is normally distributed. Therefore, a non-parametric test is used in ggscatterstats() to build a visual for Significant Test of Correlation between Resale Price and Floor Area.\n\nggscatterstats(\n  data = HDBdata2022,\n  x = floor_area_sqm,\n  y = resale_price,\n  type = \"nonparametric\",\n  marginal = TRUE,\n  title = \"Significant Test of Correlation\",\n  xlab = \"Floor Area (sqm)\",\n  ylab = \"Resale Price ($)\"\n)\n\n\n\n\nAs the test reveals that p-value is less than 𝞪-value, there is sufficient statistical evidence to reject the null hypothesis and conclude that the average resale price between different flat areas are different.\nAlso, we can conclude intuitively as well as statically that more rooms flat type will fetch higher resale price since each flat type belongs to a relatively distinct floor area range.\n4.2.3 HDB flats with higher storey ranges have higher average resale prices\n\ntooltip <- function(y, ymax, accuracy = 1) {   #<<\n  mean <- scales::number(y, accuracy = accuracy) #<<\n  sem <- scales::number(ymax - y, accuracy = accuracy) #<<\n  paste(\"Average Resale Price($k):\", mean, \"+/-\", sem) #<<\n} #<<\n\ngg_point <- ggplot(data=HDBdata2022, \n                   aes(x = storey_range),\n) +\n  stat_summary(aes(y = resale_price/1000, \n                   tooltip = after_stat(  #<<\n                     tooltip(y, ymax))),  #<<\n    fun.data = \"mean_se\", \n    geom = GeomInteractiveCol,  #<<\n    fill = \"Grey\"\n  ) +\n  stat_summary(aes(y = resale_price/1000),\n    fun.data = mean_se,\n    geom = \"errorbar\", width = 0.2, linewidth = 0.2\n  ) +\n  coord_flip() +\n  labs(title=\"Average Resale Price vs Storey Range, 2022\") +\n  ylab(\"Average Resale Price ($k)\") +\n  xlab(\"Storey Reange\") +  \n  theme_minimal()        \n\ngirafe(ggobj = gg_point,\n       width_svg = 8,\n       height_svg = 8*0.618)\n\n\n\n\n\nObservations:\n\nIt can be observed that the average resale prices for HDB flats increases as the storey ranges increases. This could be due to homeowners wish to stay higher so they are further away from the noise pollution from the roads and human traffic at the ground level.\nAnother point to note is that the range of the resale price is smaller at the lower storey ranges. This could be due to lower demand, partly caused by the requirements that a minority ethic group can only sell their home to another minority ethic group.\n\n4.2.3 HDB flats models do not show distinct relationship with resale prices\n\np_boxplot <- HDBdata2022 %>%\n  ggplot(aes(x = flat_model, y = resale_price)) + \n  geom_boxplot(aes(fill = flat_type)) +\n  coord_flip()\n\nggplotly(p_boxplot) %>%\n  layout(title = 'Flat Model vs Resale Price, 2022',\n         xaxis = list(title = 'Resale Price'), \n         yaxis = list(title = 'Flat Model'),\n         legend = list(title=list(text='<b> Flat Type </b>')))"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#conclusion",
    "href": "Take-home_Ex/Take-home_Ex03/Take-home_Ex03.html#conclusion",
    "title": "Take-home Exercise 3",
    "section": "5. Conclusion",
    "text": "5. Conclusion\nFrom the overall trends, we had observed that overall HDB flat resale prices were on a rise in the year 2022. Towns with newer flats (i.e. longer remaining lease period) generally have higher transaction volume than those with older flats. Diving deeper into factors that could impact resale price, we tested and proven that the median resale prices in the central region are higher than the rest and the mean resale price increases with larger floor area.\nIf given more time, there are many opportunities to further explore this data set. They include statistically testing on resale price and storey level range and remaining lease as well as visualisation of uncertainty in using price averages in Section 4.1"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex04/Take-home_Ex04.html",
    "href": "Take-home_Ex/Take-home_Ex04/Take-home_Ex04.html",
    "title": "Take-home Exercise 4",
    "section": "",
    "text": "For this exercise, I will be using various time-series data analytical visualization methods to explore the effects of COVID-19, as well as the global economic and political environment in 2022, on Singapore’s bilateral trade, including import, export, and trade balance.\nThe Merchandise Trade data is in .xlxs format and retrieved from the Department of Statistics, Singapore (DOS) website, under the sub-section of Merchandise Trade by Region/Market. The study period is between January 2020 to December 2022."
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex04/Take-home_Ex04.html#loading-r-packages",
    "href": "Take-home_Ex/Take-home_Ex04/Take-home_Ex04.html#loading-r-packages",
    "title": "Take-home Exercise 4",
    "section": "2. Loading R Packages",
    "text": "2. Loading R Packages\nSince ggbraid has been removed from the CRAN repository, a manual method is used to install the development version of ggbraid from GitHub.\nThe code chunk below check, install and launch these R packages: readxl, scales, viridis, lubridate, gridExtra, knitr, data.table, ggthemes, CGPfunctions, ggHoriPlot, gganimate, ggbraid, tidyverse.\n\npacman::p_load(readxl, scales, viridis, lubridate, gridExtra, knitr, data.table, ggthemes, CGPfunctions, ggHoriPlot, gapminder, gganimate, ggbraid, tidyverse)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex04/Take-home_Ex04.html#data-preparation",
    "href": "Take-home_Ex/Take-home_Ex04/Take-home_Ex04.html#data-preparation",
    "title": "Take-home Exercise 4",
    "section": "3. Data Preparation",
    "text": "3. Data Preparation\n\n3.1 Data Import\nThe function read_excel is used to read the downloaded .xlsx file. The arguments included are path to the excel file, col_types = NULL to guess the data type for the column and range to define the rows and columns where data is extracted. By selecting specific rows and columns, we can reduce some data processing steps compared to importing all rows and columns.\n\n# Read the Excel file and select the relevant columns and rows\nimports <- read_excel(\"data/outputFile.xlsx\", col_types = NULL, range = \"T1!A10:AL129\")\nexports <- read_excel(\"data/outputFile.xlsx\", col_types = NULL, range = \"T2!A10:AL101\")\n\n\n\n3.2 Data Preparation\n3.2.1 Check for missing values\nNext, the tables are being checked for missing values using a combination of functions any and is.na. If the result is FALSE, it means that there is no missing values.\n\n# Check for missing values\nany(is.na(imports))\n\n[1] FALSE\n\nany(is.na(exports))\n\n[1] FALSE\n\n\n3.2.2 Remove 2023 Jan column\nSince there study period covers from January 2020 to December 2022, the 2023 Jan column is removed from both imports and exports tables using indexing with a negative sign as shown below. The method below uses indexing to remove columns by specifying the names or positions of the columns to be removed. The “-” sign before the column names indicates that these columns should be removed.\n\n# Remove 2023 Jan column from imports and exports\nimports <- imports[, -c(2)]\nexports <- exports[, -c(2)]\n\n3.2.3 Reducing number of columns\npivot_longer is a function in the tidyr package in R that is used to reshape data to long format. It allows conversion of multiple columns into a single column, while simultaneously creating a new column to indicate the original variable associated with the values. Indexing is also used in this case to select multiple columns. names function is used to give the columns the correct naming.\n\n# Rotating the tables to consolidate the months in a column\nimports_long <- imports %>%\n  pivot_longer(cols = c(2:37),\n               values_to = \"imports\")\nexports_long <- exports %>%\n  pivot_longer(cols = c(2:37),\n               values_to = \"exports\")\n\n# Correcting the column titles\nnames(imports_long)[names(imports_long) == \"Data Series\"] <- \"location\"\nnames(imports_long)[names(imports_long) == \"name\"] <- \"monthyear\"\nnames(exports_long)[names(exports_long) == \"Data Series\"] <- \"location\"\nnames(exports_long)[names(exports_long) == \"name\"] <- \"monthyear\"\n\n3.2.4 Combining exports and imports into a single table\nThe merge function is used to join the two tables based on the common “monthyear” and “location” columns. The by argument specifies the name of the common column to join on, and the all argument specifies the type of join to perform. A full join (i.e., return all rows from both tables, filling in missing values with NA) by setting all to TRUE. Full join is used to capture trades from countries with either imports or exports only.\n\n# Creating a combined table\ntrades <- merge(imports_long, exports_long, by=c(\"location\",\"monthyear\"), all = TRUE)\n\n3.2.5 Converting monthyear into date objects\nThe mutate() function to modify “monthyear” column in the dataframe. We use paste0() to append “-01” to the “monthyear” column to create a full date string with a day component. parse_date_time() converts the character strings in the column to date objects with the “ymd” format. Finally, format() function to format the date objects in the “mmm yyyy” format using the %b %Y format code.\n\n# Append day component and change monthyear into date objects\ntrades <- trades %>%\n  mutate(monthyear = parse_date_time(paste0(monthyear, \"-01\"), \"ymd\")) %>%\n  arrange(`location`, `monthyear`)\n\n# check the class of the new column\nclass(trades$monthyear)\n\n[1] \"POSIXct\" \"POSIXt\" \n\n\n\n\n3.3 Data Wrangling\n3.3.1 Categorize merchandise trade data into Total, Regional and Country level\nSince the data in “trades” are already arranged in ascending order by location and monthyear, it enables us to create a new table for total merchandise trade by assigning the “imports” and “exports” from “Total Merchandise Imports” and “Total Merchandise Exports” directly instead of using merge function.\n\n# Total merchandise trade \ntotal <- data.frame(\n  location = \"Total Merchandise\",\n  unit = \"(Thousand Dollars)\",\n  monthyear = trades[trades$location == \"Total Merchandise Imports (Thousand Dollars)\", \"monthyear\"],\n  imports = trades[trades$location == \"Total Merchandise Imports (Thousand Dollars)\", \"imports\"],\n  exports = trades[trades$location == \"Total Merchandise Exports (Thousand Dollars)\", \"exports\"]\n)\n\nFor merchandise trades at regional level, we will filter rows with the substring using grepl() function with the pattern “Million Dollars”. This returns a logical vector which is used to subset the original table to keep only the rows that contain the substring “Million Dollars”.\n\n# Regional merchandise trade\nregional <- trades[grepl(\"Million Dollars\",trades$location),]\n\nFor merchandise trades at country level, we will filter out locations in the “total” and “regional” tables. We will also replace the ‘NA’ values with 0 by using is.na() function to create a logical vector and assign the value 0 based on this logical vector.\n\n# Country merchandise trade\ncountry <- trades[!grepl(\"Million Dollars|Total Merchandise\", trades$location),]\n\n# Replace NA values with zeros in imports and exports columns\ncountry[,c(\"imports\",\"exports\")] <- replace(country[, c(\"imports\",\"exports\")], is.na(country[, c(\"imports\",\"exports\")]), 0)\n\n3.3.2 Creating new columns for location specifics, units, year, month and tradebalance\nFor location specifics and units, we identify the required information from “location” column using regular expression concept. To retrieve the nation name, str_replace_all function is used to replace the units (e.g. Million Dollars) with whitespace which is later removed using str_trim function.\n\n# New column for location specifics\nregional <- regional %>% \n  mutate(region = str_trim(str_replace_all(regional$location, \"\\\\(Million Dollars\\\\)\",\"\")))\ncountry <- country %>%\n  mutate(nation = str_trim(str_replace_all(country$location, \"\\\\(Thousand Dollars\\\\)\",\"\")))\n\nTo retrieve the units, we can leverage on str_trim function to extract the expression within the brackets.\n\n# New column for units\nregional <- regional %>%\n  mutate(unit = str_extract(regional$location, \"\\\\([A-Za-z\\\\s]+\\\\)\"))\ncountry <- country %>%\n  mutate(unit = str_extract(country$location, \"\\\\([A-Za-z\\\\s]+\\\\)\"))\n\nTo obtain the year and month from “monthyear” column, we can apply year and month functions from lubridate library as the column is already in POSIXct format.\n\n# New columns for year and month\ntotal <- total %>%\n  mutate(year = year(total$monthyear)) %>%\n  mutate(month = month(total$monthyear)) %>%\n  mutate(year = factor(year),\n         month = factor(month, levels = 1:12))\nregional <- regional %>%\n  mutate(year = year(regional$monthyear)) %>%\n  mutate(month = month(regional$monthyear)) %>%\n  mutate(year = factor(year),\n         month = factor(month, levels = 1:12))\ncountry <- country %>%\n  mutate(year = year(country$monthyear)) %>%\n  mutate(month = month(country$monthyear)) %>%\n  mutate(year = factor(year))\n# Did not change month in country table into factor for other uses\n\nTo find out the trade balance, we can perform a simple math subtraction of imports minus exports. If the net trade balance is negative, this means that there is a net export for the reference time period. If net trade balance is positive, there would be more imports than exports for the reference time period.\n\n#New column for tradebalance\ntotal <- total %>%\n  mutate(tradebalance = imports - exports)\nregional <- regional %>%\n  mutate(tradebalance = imports - exports)\ncountry <- country %>%\n  mutate(tradebalance = imports - exports)"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex04/Take-home_Ex04.html#data-visualization",
    "href": "Take-home_Ex/Take-home_Ex04/Take-home_Ex04.html#data-visualization",
    "title": "Take-home Exercise 4",
    "section": "4. Data Visualization",
    "text": "4. Data Visualization\n\n4.1 Data Exploration\n4.1.1 Trends in overall merchandise trades\nIn this section, we will discover patterns in overall merchandise trades using heatmaps followed by cycleplots.\nHeatmaps\n\n\nCode Chunk to Plot Heatmaps\n#Converting to non-scientific number format\noptions(scipen = 999)\n\n# Creating the heatmap for Total imports\np_heatmap1 <- \n  ggplot(total,\n         aes(month,year, fill = imports)) + \n  geom_tile(color = \"white\", size =0.5) +\n  theme_tufte() +\n  coord_equal() +\n  scale_fill_gradient(name = \"Thousand Dollars\",\n                      low = \"lightblue\",\n                      high = \"darkblue\") +\n  labs(x = NULL, y = NULL, \n       title = \"Imports by Year and Month\") +\n  theme(axis.ticks = element_blank(),\n      plot.title = element_text(hjust = 0.5),\n      legend.title = element_text(size = 8),\n      legend.text = element_text(size = 6))\n\n#Creating the heatmap for Total Exports\np_heatmap2 <-\n  ggplot(total,\n         aes(month,year, fill = exports)) + \n  geom_tile(color = \"white\", size =0.5) +\n  theme_tufte() +\n  coord_equal() +\n  scale_fill_gradient(name = \"Thousand Dollars\",\n                      low = \"pink\",\n                      high = \"darkred\") +\n  labs(x = NULL, y = NULL, \n       title = \"Exports by Year and Month\") +\n  theme(axis.ticks = element_blank(),\n      plot.title = element_text(hjust = 0.5),\n      legend.title = element_text(size = 8),\n      legend.text = element_text(size = 6))\n\n#Creating the heatmap for Total Trade Balance\np_heatmap3 <-\n  ggplot(total,\n         aes(month,year, fill = tradebalance)) + \n  geom_tile(color = \"white\", size =0.5) +\n  theme_tufte() +\n  coord_equal() +\n  scale_fill_gradient(name = \"Thousand Dollars\",\n                      low = \"black\",\n                      high = \"lightgrey\") +\n  labs(x = NULL, y = NULL, \n       title = \"Trade balance by Year and Month\") +\n  theme(axis.ticks = element_blank(),\n      plot.title = element_text(hjust = 0.5),\n      legend.title = element_text(size = 8),\n      legend.text = element_text(size = 6))\n\n# Customize the ggplots using gridExtra\ngrid.arrange(p_heatmap1, p_heatmap2, p_heatmap3, ncol = 1)\n\n\n\n\n\nInsights\nFrom the heatmaps, we can observe that:\n\nTotal imports and exports in Singapore had been increasing from 2020 to 2022. This could be due to recovery of trade activities with border opening after relaxation of Covid-19 restrictions.\nIn general, imports and exports shows similar trends across the three years. However, the month-on-month changes of exports and imports are actually not consistent which causes the heatmap for the trade balance to have different colour gradient pattern compared to imports/exports.\nBased on the legend, magnitude of exports is larger than magnitude of imports. This is consistent with the trade balance heat map which shows that trade balance is generally negative.\n\nCycleplots\n\n\nCode Chunk to Plot Cycleplot\n#Converting to non-scientific number format\noptions(scipen = 999)\n\n#Computing year average by months\nhline.data <- total %>%\n  group_by(month) %>%\n  summarise(avg_export = mean(exports), \n            avg_import = mean(imports), \n            avg_balance = mean(tradebalance))\n\n#Plotting cycle plot for imports\np_cycleplot1 <-\n  ggplot() +\n  geom_line(data = total,\n           aes(x=year,y=imports, group=month), colour = \"black\") +\n  geom_hline(data = hline.data,\n             aes(yintercept=avg_import),\n             linetype=6, \n             colour=\"red\", \n             size=0.5) +\n  facet_grid(~month) +\n  theme(axis.text.x = element_text(angle=90, vjust=1, hjust=1)) +\n  labs(title = \"Total Imports, Jan 2020-Dec 2022\") +\n  xlab(\"\") +\n  ylab(\"$\")\n\n#Plotting cycle plot for exports\np_cycleplot2 <-\n  ggplot() +\n  geom_line(data = total,\n           aes(x=year,y=exports, group=month), colour = \"black\") +\n  geom_hline(data = hline.data,\n             aes(yintercept=avg_export),\n             linetype=6, \n             colour=\"red\", \n             size=0.5) +\n  facet_grid(~month) +\n  theme(axis.text.x = element_text(angle=90, vjust=1, hjust=1)) +\n  labs(title = \"Total Exports, Jan 2020-Dec 2022\") +\n  xlab(\"\") +\n  ylab(\"$\")\n\n#Plotting cycle plot for trade balance\np_cycleplot3 <-\n  ggplot() +\n  geom_line(data = total,\n           aes(x=year,y=tradebalance, group=month), colour = \"black\") +\n  geom_hline(data = hline.data,\n             aes(yintercept=avg_balance),\n             linetype=6, \n             colour=\"red\", \n             size=0.5) +\n  facet_grid(~month) +\n  theme(axis.text.x = element_text(angle=90, vjust=1, hjust=1)) +\n  labs(title = \"Total Trade Balance, Jan 2020-Dec 2022\") +\n  xlab(\"\") +\n  ylab(\"$\")\n\n# Customize the ggplots using gridExtra\ngrid.arrange(p_cycleplot1, p_cycleplot2, p_cycleplot3, ncol = 1, heights = c(5,5,5))\n\n\n\n\n\nInsights\nFrom the cycleplot, we can observe that:\n\nFor January to September, the increase in imports and exports from 2021 to 2022 is larger than the increase in imports and exports from 2020 to 2021.\nHowever, there is a trend reversal for both imports and exports for October to December from 2021 to 2022 compared to from 2020 to 2021.\nThe average trade balance is highest during April to July compared to the other months.\n\n4.1.2 Trends in merchandise trades of regions\nIn this section, we will discover patterns in regional merchandise trades using horizon plot and slopegraph.\nHorizon Plot\n\n\nCode Chunk to Plot Horizon Plot\n#Converting to non-scientific number format\noptions(scipen = 999)\n\n#Correcting date format\nregional <- regional %>%\n  mutate(date = ymd(`monthyear`))\n\n#Plotting Horizon Plot for Imports\np_horizon1 <-\n  regional %>% \n  ggplot() +\n  geom_horizon(aes(x = date, y=imports), \n               origin = \"midpoint\", \n               horizonscale = 6)+\n    facet_grid(`region`~.) +\n    theme_few() +\n  scale_fill_hcl(palette = 'RdBu') +\n  theme(panel.spacing.y=unit(0, \"lines\"), strip.text.y = element_text(\n    size = 5, angle = 0, hjust = 0),\n    legend.position = 'none',\n    axis.text.y = element_blank(),\n    axis.text.x = element_text(size=7),\n    axis.title.y = element_blank(),\n    axis.title.x = element_blank(),\n    axis.ticks.y = element_blank(),\n    panel.border = element_blank()\n    ) +\n    scale_x_date(expand=c(0,0), date_breaks = \"3 month\", date_labels = \"%b%y\") +\n  ggtitle('Imports from Each Region (Jan 2020 to Dec 2022)')\n\n#Plotting Horizon Plot for Exports\np_horizon2 <-\n  regional %>% \n  ggplot() +\n  geom_horizon(aes(x = date, y=exports), \n               origin = \"midpoint\", \n               horizonscale = 6)+\n    facet_grid(`region`~.) +\n    theme_few() +\n  scale_fill_hcl(palette = 'RdBu') +\n  theme(panel.spacing.y=unit(0, \"lines\"), strip.text.y = element_text(\n    size = 5, angle = 0, hjust = 0),\n    legend.position = 'none',\n    axis.text.y = element_blank(),\n    axis.text.x = element_text(size=7),\n    axis.title.y = element_blank(),\n    axis.title.x = element_blank(),\n    axis.ticks.y = element_blank(),\n    panel.border = element_blank()\n    ) +\n    scale_x_date(expand=c(0,0), date_breaks = \"3 month\", date_labels = \"%b%y\") +\n  ggtitle('Exports to Each Region (Jan 2020 to Dec 2022)')\n\n#Plotting Horizon Plot for Trade Balances\np_horizon3 <-\n  regional %>% \n  ggplot() +\n  geom_horizon(aes(x = date, y=tradebalance), \n               origin = \"midpoint\", \n               horizonscale = 6)+\n    facet_grid(`region`~.) +\n    theme_few() +\n  scale_fill_hcl(palette = 'RdBu') +\n  theme(panel.spacing.y=unit(0, \"lines\"), strip.text.y = element_text(\n    size = 5, angle = 0, hjust = 0),\n    legend.position = 'none',\n    axis.text.y = element_blank(),\n    axis.text.x = element_text(size=7),\n    axis.title.y = element_blank(),\n    axis.title.x = element_blank(),\n    axis.ticks.y = element_blank(),\n    panel.border = element_blank()\n    ) +\n    scale_x_date(expand=c(0,0), date_breaks = \"3 month\", date_labels = \"%b%y\") +\n  ggtitle('Tradebalances for Each Region (Jan 2020 to Dec 2022)')\n\n# Customize the ggplots using gridExtra\ngrid.arrange(p_horizon1, p_horizon2, p_horizon3, ncol = 1, heights = c(3,3,3))\n\n\n\n\n\nInsights\nFrom the horizon plots, we can observe that:\n\nFor imports and exports, European Union and Europe were the first two regions to become consistently above average on around Feb 21. This is consistent with the timing where Europe is the first regions that relax cross-border restrictions.\n\nSlopegraph\n\n\nCode Chunk to Plot Slopegraph\n#Converting to non-scientific number format\noptions(scipen = 999)\n#Grouping regionals by year and region\nregional_grp <- regional %>%\n  group_by(`year`,`region`) %>%\n  summarise(sum_imports = log10(sum(imports)),\n            sum_exports = log10(sum(exports)),\n            sum_balance = (sum(tradebalance)))\n\n#Plotting the slopegraph for imports\nregional_grp %>%\n  filter(year %in% c(2020, 2022)) %>%\n  newggslopegraph(year, sum_imports, region,\n                  Title = \"Imports ($) from each Region, 2020-2022\",\n                  SubTitle = \"Logarithic y-scale\",\n                  Caption = \"Source: DoS\")\n\n\n\n\n\nCode Chunk to Plot Slopegraph\n#Plotting the slopegraph for exports\nregional_grp %>%\n  filter(year %in% c(2020, 2022)) %>%\n  newggslopegraph(year, sum_exports, region,\n                  Title = \"Exports ($) to each Region, 2020-2022\",\n                  SubTitle = \"Logarithic y-scale\",\n                  Caption = \"Source: DoS\")\n\n\n\n\n\nCode Chunk to Plot Slopegraph\n#Plotting the slopegraph for trade balances\nregional_grp %>%\n  filter(year %in% c(2020, 2022)) %>%\n  newggslopegraph(year, sum_balance, region,\n                  Title = \"Trade Balance ($) for each Region, 2020-2022\",\n                  SubTitle = \"Normal y-scale\",\n                  Caption = \"Source: DoS\")\n\n\n\n\n\nInsights\nFrom the slopegraph, we can observe that:\n\nThe trade balance for America has changed from net export (negative value) in 2020 to net import (positive value) in 2022.\nNet imports (positive) from Europe had the largest increase from 2020 to 2022 compared to the other regions.\nNet exports to Oceania (negative) is the largest increase from 2020 to 2022 compared to the other regions.\n\n4.1.3 Trends in merchandise trades of countries\nIn this section, we will use the animated bubble chart to explore how the imports had changed against their exports for each country.\nAnimated bubble chart\n\n\nCode Chunk to Plot Animated Bubble Chart\n#Correcting date format\ncountry <- country %>%\n  mutate(date = ymd(`monthyear`))\n  \n#Plotting animated bubble chart\nggplot(country, aes(x = imports/1000, y = exports/1000,\n                    colour = nation, \n                    label = nation)) +\n  geom_point(alpha = 1.5, \n             show.legend = FALSE) +\n  geom_text(check_overlap = TRUE) +\n  scale_colour_manual(values = country_colors, guide = \"none\") +\n  scale_size(range = c(2, 12)) +\n  labs(title = \"Date: {format(frame_time, '%b%y')}\", \n       x = 'Imports ($k)', \n       y = 'Exports ($k)') +\n  transition_time(date) +       #<<\n  ease_aes('linear')            #<<\n\n\n\n\n\nInsights\nFrom the animated bubbled chart, we observed that:\n\nAcross 2020 to 2022, imports to Hong Kong and Indonesia remained relatively constant while the exports had increased over that period.\nDuring mid 2022, it can be observed exports and imports with United States, Malaysia and China had larger fluctuations in different direction.\n\n\n\n4.2 Impact of Global Events\nIn this section, we will investigate the impact of COVID-19 as well as the global economic and political dynamic in 2022 on Singapore bi-lateral trades. Three main events are highlighted and examined for the purpose of this study.\n4.2.1 Regional Comprehensive Economic Partnership (RCEP) trade agreement\nIn 2022, RCEP came into effect in Jan for ten original parties: Australia, Brunei, Cambodia, China, Japan, Laos, New Zealand, Singapore, Thailand and Vietnam. RCEP then entered into force for the Republic of Korea on Feb and for Malaysia on Mar.\nThe RCEP potentially boost Singapore’s trade by creating a more integrated and seamless market among its trading partners. Singapore is one of the countries expected to benefit the most from the agreement due to its strategic location and well-developed infrastructure.\nWe will use boxplot to illustrate these significant movements in exports or/and imports for Malaysia, Japan, Korea, China and Australia (as observed in Section 4.1.3). From the boxplots, we can observe that trades activities had picked up with these countries compared to the 2020 and 2021.\n\n\nCode Chunk to Create a boxplot\n# Creating quarter column\ncountry$quarter = ifelse(country$month < 4,\n                     \"Q1\", ifelse(country$month > 3 & country$month < 7,\n                     \"Q2\", ifelse(country$month > 6 & country$month < 10,\n                     \"Q3\", \"Q4\")))\nq_order <- c(\"Q1 2020\", \"Q2 2020\", \"Q3 2020\", \"Q4 2020\", \n             \"Q1 2021\", \"Q2 2021\", \"Q3 2021\", \"Q4 2021\", \n             \"Q1 2022\", \"Q2 2022\", \"Q3 2022\", \"Q4 2022\")\n\ncountry <- country %>%\n  mutate(quarter = paste(country$quarter, country$year)) %>%\n  mutate(quarter = factor(quarter, level =q_order))\n\ncountry_rcep <- country %>%\n  filter(nation %in% c(\"Malaysia\", \"Japan\", \"Republic Of Korea\", \"Mainland China\", \"Australia\"))\n\n#Plotting the boxplot for imports\np_boxplot1 <-\n  ggplot(data = country_rcep,\n         aes(x = quarter, y = imports/1000)) + \n  geom_boxplot(aes(fill = nation)) +\n  labs(title = \"Imports of Selected Countries, 2020-2022\",\n       x = \"\", y = \"$ (Thousand Dollars)\", color = \"Values\") +\n  theme(title = element_text(size = 8), axis.title = element_text(size = 8),\n        axis.text.x = element_text(angle=90, vjust=1, hjust=1))\n\n#Plotting the boxplot for exports\np_boxplot2 <-\n  ggplot(data = country_rcep,\n         aes(x = quarter, y = exports/1000)) + \n  geom_boxplot(aes(fill = nation)) +\n  labs(title = \"Exports of Selected Countries, 2020-2022\",\n       x = \"\", y = \"$ (Thousand Dollars)\", color = \"Values\") +\n  theme(title = element_text(size = 8), axis.title = element_text(size = 8),\n        axis.text.x = element_text(angle=90, vjust=1, hjust=1))\n\n# Customize the ggplots using gridExtra\ngrid.arrange(p_boxplot1, p_boxplot2, ncol = 1, heights = c(25,25))\n\n\n\n\n\n4.2.2 Escalation of tension between China and US\nIn 2022, the tensions between China and US had escalated which resulted in increased tariffs and trade restrictions, especially in the last quarter.\nAs a small, open economy heavily reliant on international trade, Singapore becomes vulnerable to global trade tensions. We can observed from the The ongoing trade conflict between the US and China resulted in negative spillover effects on Singapore’s trade, particularly for China. From the plots below, we can observed that there is a reduce in demand for Singapore’s exports to China.\n\n\nCode Chunk to Plot Braided Ribbon Chart\n# Pivot longer for the second time to group import and export into one column\ncountry_br <- country %>%\n  pivot_longer(cols = c(3:4),\n               values_to = \"amount\",\n               names_to = \"type\")\n\n#Plotting the braid ribbons chart for China\np_braid1 <-\n  ggplot() +\n  geom_line(data = country_br |> filter(nation == \"Mainland China\"),\n            aes(x = date, y = (amount/1000), group = type, color = type),\n            linewidth = 1.2) +\n  geom_braid(data = country |> filter(nation == \"Mainland China\"),\n             aes(x = date, ymin = (imports/1000), ymax = (exports/1000),\n                 fill = imports/1000 > exports/1000), alpha = 0.5) + \n  scale_color_manual(values = c(\"deepskyblue3\", \"brown1\"), labels = c(\"Export\", \"Import\")) + \n  scale_fill_manual(values = c(\"deepskyblue3\", \"brown1\"), guide = \"none\") + \n  labs(title = \"Between Singapore & China\",\n       x = \"\", y = \"$ (Thousand Dollars)\", color = \"Values\") + \n  theme(title = element_text(size = 8), axis.title = element_text(size = 8),\n        axis.text.x = element_text(angle=90, vjust=1, hjust=1),\n        legend.title=element_text(size=8),\n        legend.position =\"bottom\") +\n  scale_x_date(expand=c(0,0), date_breaks = \"3 month\", date_labels = \"%b%y\")\n\n#Plotting the braid ribbons chart for USA\np_braid2 <-\n  ggplot() +\n  geom_line(data = country_br |> filter(nation == \"United States\"),\n            aes(x = date, y = (amount/1000), group = type, color = type),\n            linewidth = 1.2) +\n  geom_braid(data = country |> filter(nation == \"United States\"),\n             aes(x = date, ymin = (imports/1000), ymax = (exports/1000),\n                 fill = imports/1000 > exports/1000), alpha = 0.5) + \n  scale_color_manual(values = c(\"deepskyblue3\", \"brown1\"), labels = c(\"Export\", \"Import\")) + \n  scale_fill_manual(values = c(\"deepskyblue3\", \"brown1\"), guide = \"none\") + \n  labs(title = \"Between Singapore & United States\",\n       x = \"\", y = \"$ (Thousand Dollars)\", color = \"Values\") + \n  theme(title = element_text(size = 8), axis.title = element_text(size = 8),\n        axis.text.x = element_text(angle=90, vjust=1, hjust=1),\n        legend.position =\"bottom\")+\n  scale_x_date(expand=c(0,0), date_breaks = \"3 month\", date_labels = \"%b%y\")\n\n# Customize the ggplots using gridExtra\ngrid.arrange(p_braid1, p_braid2, ncol = 2, \n             top = \"Total Merchandise Trades (2020-2022)\")\n\n\n\n\n\n4.2.3 Russia-Ukraine war and second wave of Covid-19 infections\nThe Russia-Ukraine war had potentially caused an impact to the global trade in goods and services as the energy priced almost doubled and rapid inflation of non-energy prices were also observed.\nIn addition, the pandemic continues to pose challenges for Singapore’s trade as it disrupts global supply chains and reduces demand for Singapore’s exports. The resurgence of COVID-19 cases in the Southeast Asia region could further hamper trade by disrupting cross-border travel and limiting the availability of critical goods and services.\nFrom the visualization, we can observed the net export decreases in 2022 while imports from Europe remains fairly consistent. It implies that the closer proximity of the events had a greater influence on Singapore’s bilateral trades.\n\n\nCode Chunk to Plot Braided Ribbon Chart\n# Pivot longer for the second time to group import and export into one column\nregional_br <- regional %>%\n  pivot_longer(cols = c(3:4),\n               values_to = \"amount\",\n               names_to = \"type\")\n\n#Plotting the braid ribbons chart for Asia\np_braid3 <-\n  ggplot() +\n  geom_line(data = regional_br |> filter(region == \"Asia\"),\n            aes(x = date, y = (amount/1000), group = type, color = type),\n            linewidth = 1.2) +\n  geom_braid(data = regional |> filter(region == \"Asia\"),\n             aes(x = date, ymin = (imports/1000), ymax = (exports/1000),\n                 fill = imports/1000 > exports/1000), alpha = 0.5) + \n  scale_color_manual(values = c(\"deepskyblue3\", \"brown1\"), labels = c(\"Export\", \"Import\")) + \n  scale_fill_manual(values = c(\"deepskyblue3\", \"brown1\"), guide = \"none\") + \n  labs(title = \"Between Singapore & Asia\",\n       x = \"\", y = \"$ (Thousand Dollars)\", color = \"Values\") + \n  theme(title = element_text(size = 8), axis.title = element_text(size = 8),\n        axis.text.x = element_text(angle=90, vjust=1, hjust=1),\n        legend.position = \"bottom\") +\n  scale_x_date(expand=c(0,0), date_breaks = \"3 month\", date_labels = \"%b%y\")\n\n#Plotting the braid ribbons chart for Europe\np_braid4 <-\n  ggplot() +\n  geom_line(data = regional_br |> filter(region == \"Europe\"),\n            aes(x = date, y = (amount/1000), group = type, color = type),\n            linewidth = 1.2) +\n  geom_braid(data = regional |> filter(region == \"Europe\"),\n             aes(x = date, ymin = (exports/1000), ymax = (imports/1000),\n                 fill = imports/1000 < exports/1000), alpha = 0.5) + \n  scale_color_manual(values = c(\"deepskyblue3\", \"brown1\"), labels = c(\"Export\", \"Import\")) + \n  scale_fill_manual(values = c(\"brown1\", \"deepskyblue3\"), guide = \"none\") + \n  labs(title = \"Between Singapore & Europe\",\n       x = \"\", y = \"$ (Thousand Dollars)\", color = \"Values\") + \n  theme(title = element_text(size = 8), axis.title = element_text(size = 8),\n        axis.text.x = element_text(angle=90, vjust=1, hjust=1),\n        legend.position = \"bottom\") +\n  scale_x_date(expand=c(0,0), date_breaks = \"3 month\", date_labels = \"%b%y\")\n\n# Customize the ggplots using gridExtra\ngrid.arrange(p_braid3, p_braid4, ncol = 2, \n             top = \"Total Merchandise Trades (2020-2022)\")"
  },
  {
    "objectID": "Take-home_Ex/Take-home_Ex04/Take-home_Ex04.html#conclusion",
    "href": "Take-home_Ex/Take-home_Ex04/Take-home_Ex04.html#conclusion",
    "title": "Take-home Exercise 4",
    "section": "5. Conclusion",
    "text": "5. Conclusion\nThe ongoing COVID-19 pandemic in 2022 has continued to impactSingapore’s bilateral trade. The outbreak of new waves of infections in Southeast Asia, has led to renewed travel restrictions and supply chain disruptions, posing challenges for Singapore’s trading activities. There are also other global events such as implementation of the Regional Comprehensive Economic Partnership (RCEP) trade agreement, the escalation of tensions between the US and China which also influenced Singapore’s trade relationships and economic growth. From the visualization we can observe that some events may pose challenges for Singapore’s trade, others present opportunities for the country to improve trade."
  }
]